{% extends 'base.html' %}

{% block title %}
    {{ user.first_name }} {{ user.last_name }}
{% endblock %}

{% block body %}

<div class="card mb-3">
    <img src="{{ url_for('static', filename='/images/profile.png') }}" class="card-img-top" 
            height="200" alt="user profile" />
    
    <div class="card-body">
        <h5 class="card-title">{{ user.first_name }} {{ user.last_name }}</h5>
        
        <p class="card-text">
            <span class="badge text-bg-info fs-6">Blogs: {{ user.blogs | length }}</span>
            <span class="badge text-bg-info fs-6">Following: {{ user.followings | length }}</span>
            <span class="badge text-bg-info fs-6">Followers: {{ user.followers | length }}</span>
        </p>
    </div>
</div>
<hr />
<br />

{% if user.blogs | length %}
{% for blog in user.blogs|reverse %}

<div class="card mb-3" id="blog{{ blog.id }}">
    {%if blog.image_path %}
    <img src="{{ url_for('static', filename='images/') }}/{{ blog.image_path }}" 
        class="card-img-top" height="250" alt="{{blog.image_path}}" />
    {% endif %}
    <div class="card-body">
        <h2 class="card-title">
            {{ blog.title }}
            <a href="/blog/{{ blog.id }}/{{ 'dislike' if blog.id in likes else 'like' }}/{{ user.id }}">
                <i class="bi bi-star{{ '-fill' if blog.id in likes else '' }} text-warning"></i>
            </a>
        </h2>
        <p class="card-text">
            <span class="text-muted">Likes: {{ blog.likes|length }}</span>
        </p>
        <p class="card-text">{{ blog.description }}</p>
    </div>
</div>

{% endfor %}
{% endif %}

{% endblock %}